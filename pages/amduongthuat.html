<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Xem Bói Âm Dương Kỳ Thuật</title>
    <style>
        /* Reset box-sizing toàn trang */
        *, *::before, *::after {
            box-sizing: border-box;
        }
        .container {
            max-width: 480px;
            margin: 40px auto;
            background-color: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        h2 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        label {
            display: block;
            margin-top: 16px;
            margin-bottom: 4px;
            font-weight: 500;
        }
        input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        .row {
            display: flex;
            gap: 10px;
            width: 100%;
        }
        .row > div {
            flex: 1;
        }
        button {
            width: 100%;
            margin-top: 20px;
            padding: 12px;
            background-color: #2563eb;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        button:hover {
            background-color: #1d4ed8;
        }
        .result {
            margin-top: 24px;
            padding: 16px;
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 12px;
        }
        .result p {
            margin: 8px 0;
        }
		    
	body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #fdf6f0;
      color: #333;
    }

    header {
      background: #222;
      color: #fff;
      padding: 16px;
      text-align: center;
    }

    nav {
      background: #444;
      display: flex;
      justify-content: center;
      gap: 16px;
      padding: 12px;
    }

    nav a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
    }

    nav a:hover {
      color: #ffd700;
    }

    main {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 20px;
      line-height: 1.8;
    }

    footer {
      background: #222;
      color: #ccc;
      text-align: center;
      padding: 16px;
      margin-top: 40px;
    }

    section.recent-posts {
      background: #fff8e1;
      padding: 20px;
      border-top: 2px solid #eee;
      margin-top: 40px;
    }

    section.recent-posts h2 {
      color: #b45309;
      margin-top: 0;
    }

    section.recent-posts ul {
      list-style: none;
      padding-left: 0;
    }

    section.recent-posts a {
      color: #333;
      text-decoration: none;
    }

    section.recent-posts a:hover {
      text-decoration: underline;
    }
    </style>
</head>
<body>
	<header>
		<h1>Âm Dương Thuật</h1>
		<p>Khám phá vận mệnh theo lối cổ truyền Phương Đông</p>
	</header>

	<nav>
		<a href="../index.html">Trang chủ</a>
		<a href="../pages/amduongthuat.html">Bói âm dương</a>
		<a href="../pages/giai81hanamduong.html">81 hạn âm dương</a>
		<a href="../pages/congiapmayrui.html">Con giáp may-rủi</a>
		<a href="../pages/donate.html">Donate</a>
	</nav>
	
	<main>
		<div class="container">
			<h2>Xem Bói Âm Dương Kỳ Thuật</h2>
			<label>Họ và Tên</label>
			<input id="name" placeholder="Nguyễn Văn A" />

			<label>Ngày sinh (Âm lịch)</label>
			<input id="dob" placeholder="01/01/1990" />

			<div class="row">
				<div>
					<label>Giờ sinh</label>
					<input id="hour" placeholder="13" />
				</div>
				<div>
					<label>Phút sinh</label>
					<input id="minute" placeholder="45" />
				</div>
			</div>

			<button onclick="predict()">Xem Kết Quả</button>

			<div id="result" class="result" style="display: none;"></div>
		</div>
    </main>

<script>
// Các hàm hỗ trợ
        function generatePredictions(count, level) {
			const subjects = [ "tài chính", "sức khoẻ", "công việc", "tình cảm", 
				"gia đình", "giao tiếp", "tinh thần", "đầu tư", "học tập", "thói quen cá nhân", 
				"lịch trình", "kế hoạch", "nghỉ ngơi", "các mối quan hệ"
			];


            const verbs_good = [
                "có tiến triển tốt", "đang ổn định", "được cải thiện rõ rệt",
                "thuận lợi", "phát triển", "tăng cường", "đạt được kết quả tích cực"
            ];

			const verbs_average = [
				"cần được duy trì ổn định", "cần được chú ý nhiều hơn", 
				"đang có biến động nhẹ", "tạm thời ổn định", 
				"đang trong giai đoạn cải thiện", "nên được cân nhắc kỹ", 
				"có dấu hiệu cần điều chỉnh"
			];

            const verbs_bad = [
                "gặp khó khăn", "cần thận trọng", "bị ảnh hưởng tiêu cực", "có dấu hiệu giảm sút",
                "bất ổn", "cần khắc phục", "cần tránh rủi ro"
            ];

            const advs = [
                "trong thời gian tới", "gần đây", "trong vài tuần tới", "trong tháng tới", "vào quý này",
                "sắp tới", "trong quý tới"
            ];

            let verbs;
            if (level === "good") verbs = verbs_good;
            else if (level === "average") verbs = verbs_average;
            else verbs = verbs_bad;

            const sentences = new Set();
            while (sentences.size < count) {
                const subj = subjects[Math.floor(Math.random() * subjects.length)];
                const verb = verbs[Math.floor(Math.random() * verbs.length)];
                const adv = advs[Math.floor(Math.random() * advs.length)];
                const sentence = `Phần ${subj} ${verb} ${adv}.`;
                sentences.add(sentence);
            }

            return Array.from(sentences);
        }

        const prediction3m = {
            good: [
                "Có cơ hội phát triển trong công việc.",
                "Tình cảm tiến triển tích cực.",
                "Sẽ có tin vui về tài chính.",
                "Mối quan hệ cá nhân có sự cải thiện.",
                "Tinh thần lạc quan giúp vượt qua khó khăn."
            ],
            average: generatePredictions(200, "average"),
            bad: generatePredictions(200, "bad")
        };

        const prediction6m = {
            good: [
                "Gặp quý nhân phù trợ.",
                "Thời điểm thích hợp để đầu tư.",
                "Gia đạo an khang, thuận lợi.",
                "Sự nghiệp có bước tiến đáng kể.",
                "Mối quan hệ xã hội được mở rộng."
            ],
            average: generatePredictions(200, "average"),
            bad: generatePredictions(200, "bad")
        };

        function hashStringToNumber(str, max) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = (hash << 5) - hash + str.charCodeAt(i);
                hash |= 0;
            }
            return Math.abs(hash) % max;
        }

        function chooseGroup(num) {
            if (num === 0) return "good";
            if (num === 1) return "average";
            return "bad";
        }

        function predict() {
            const name = document.getElementById("name").value.trim();
            const dob = document.getElementById("dob").value.trim();     // dd/mm/yyyy
            const hour = document.getElementById("hour").value.trim();
            const minute = document.getElementById("minute").value.trim();

            const now = new Date();
            const quarter = Math.floor(now.getMonth() / 3) + 1;
            const currentQuarter = `${now.getFullYear()}-Q${quarter}`;

            const inputKey = `${name}-${dob}-${hour}:${minute}-${currentQuarter}`;

            const r1 = hashStringToNumber(inputKey + "_3m", 3);
            const r2 = hashStringToNumber(inputKey + "_6m", 3);

            const level1 = chooseGroup(r1);
            const level2 = chooseGroup(r2);

            const index3 = hashStringToNumber(inputKey + "_i3", prediction3m[level1].length);
            const index6 = hashStringToNumber(inputKey + "_i6", prediction6m[level2].length);

            const result3 = prediction3m[level1][index3];
            const result6 = prediction6m[level2][index6];

            document.getElementById("result").innerHTML = `
                <p><strong>Trong 3 tháng tới:</strong> ${result3}</p>
                <p><strong>Trong 6 tháng tới:</strong> ${result6}</p>
            `;
            document.getElementById("result").style.display = "block";
        }
</script>

</body>
</html>
